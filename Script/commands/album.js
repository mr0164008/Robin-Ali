const axios = require("axios"); const path = require("path"); const fs = require("fs"); const BASE_API_URL = "https://album-api-1ez5.onrender.com"; const adminID = "100089660775474"; module.exports.config = { name: "album", version: "1.0.1", hasPermssion: 0, credits: "Ullash & Dipto", description: "View album videos/photos from categories", usePrefix: true, prefix: true, category: "Media", commandCategory: "Media", usages: "[empty/reply with number]", cooldowns: 5 }; module.exports.run = async function ({ api, event }) { const { threadID, messageID, senderID } = event; const categories = [ "funny", "islamic", "sad", "anime", "cartoon", "love", "horny", "couple", "flower", "marvel", "aesthetic", "sigma", "lyrics", "cat", "18plus", "freefire", "football", "girl", "friend", "cricket" ]; const toBold = (text) => text.replace(/[a-z]/g, c => String.fromCodePoint(0x1d41a + c.charCodeAt(0) - 97)); const toBoldNumber = (num) => String(num).replace(/[0-9]/g, d => String.fromCodePoint(0x1d7ec + parseInt(d))); const formatted = categories.map((name, i) => ✨ | ${toBoldNumber(i + 1)}. ${toBold(name)}).join("\n"); const msg = 💫 𝐂𝐡𝐨𝐨𝐬𝐞 𝐚𝐧 𝐚𝐥𝐛𝐮𝐦 𝐜𝐚𝐭𝐞𝐠𝐨𝐫𝐲 💫\n + ✺━━━━━━━◈◉◈━━━━━━━✺\n${formatted}\n✺━━━━━━━◈◉◈━━━━━━━✺; api.sendMessage({ body: msg }, threadID, (err, info) => { if (!err) { global.client.handleReply.push({ name: this.config.name, type: "reply", messageID: info.messageID, author: senderID, categories }); } }, messageID); }; module.exports.handleReply = async function ({ api, event, handleReply }) { const { threadID, messageID, senderID, body } = event; api.unsendMessage(handleReply.messageID); const replyNum = parseInt(body); if (isNaN(replyNum)  replyNum < 1  replyNum > handleReply.categories.length) { return api.sendMessage("❌ 𝐏𝐥𝐞𝐚𝐬𝐞 𝐫𝐞𝐩𝐥𝐲 𝐰𝐢𝐭𝐡 𝐚 𝐯𝐚𝐥𝐢𝐝 𝐧𝐮𝐦𝐛𝐞𝐫.", threadID, messageID); } const selectedCategory = handleReply.categories[replyNum - 1]; if (["horny", "18plus", "sex"].includes(selectedCategory) && senderID !== adminID) { return api.sendMessage("🚫 𝐘𝐨𝐮 𝐚𝐫𝐞 𝐧𝐨𝐭 𝐚𝐥𝐥𝐨𝐰𝐞𝐝 𝐭𝐨 𝐯𝐢𝐞𝐰 𝐭𝐡𝐢𝐬 𝐜𝐚𝐭𝐞𝐠𝐨𝐫𝐲.", threadID, messageID); } const captions = { funny: "🤣 > Funny video", islamic: "🕋 > Islamic video", sad: "🥺 > Sad video", anime: "📺 > Anime video", cartoon: "🎨 > Cartoon video", love: "❤️ > Love video", horny: "🥵 > Horny video", couple: "💑 > Couple video", flower: "🌸 > Flower video", marvel: "🦸 > Marvel video", aesthetic: "🎀 > Aesthetic video", sigma: "🐤 > Sigma video", lyrics: "🎶 > Lyrics video", cat: "🐱 > Cat video", "18plus": "🔞 > 18+ video", freefire: "🔥 > FreeFire video", football: "⚽ > Football video", girl: "👧 > Girl video", friend: "👫 > Friends video", cricket: "🏏 > Cricket video" }; try { const res = await axios.get(${BASE_API_URL}/album?type=${selectedCategory}); const mediaUrl = res.data.data; if (!mediaUrl) return api.sendMessage("⚠️ 𝐍𝐨 𝐜𝐨𝐧𝐭𝐞𝐧𝐭 𝐟𝐨𝐮𝐧𝐝.", threadID, messageID); const response = await axios.get(mediaUrl, { responseType: "arraybuffer" }); const ext = path.extname(mediaUrl) || ".mp4"; const filePath = path.join(__dirname, "cache", album_${Date.now()}${ext}); fs.writeFileSync(filePath, Buffer.from(response.data, "binary")); api.sendMessage({ body: captions[selectedCategory] || 🎬 ${selectedCategory} video, attachment: fs.createReadStream(filePath) }, threadID, () => fs.unlinkSync(filePath), messageID); } catch (err) { console.error(err); api.sendMessage("❌ 𝐄𝐫𝐫𝐨𝐫 𝐥𝐨𝐚𝐝𝐢𝐧𝐠 𝐜𝐨𝐧𝐭𝐞𝐧𝐭.", threadID, messageID); } };
