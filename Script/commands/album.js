const axios = require("axios"); const path = require("path"); const fs = require("fs"); const BASE_API_URL = "https://album-api-1ez5.onrender.com"; const adminID = "100089660775474"; module.exports.config = { name: "album", version: "1.0.1", hasPermssion: 0, credits: "Ullash & Dipto", description: "View album videos/photos from categories", usePrefix: true, prefix: true, category: "Media", commandCategory: "Media", usages: "[empty/reply with number]", cooldowns: 5 }; module.exports.run = async function ({ api, event }) { const { threadID, messageID, senderID } = event; const categories = [ "funny", "islamic", "sad", "anime", "cartoon", "love", "horny", "couple", "flower", "marvel", "aesthetic", "sigma", "lyrics", "cat", "18plus", "freefire", "football", "girl", "friend", "cricket" ]; const toBold = (text) => text.replace(/[a-z]/g, c => String.fromCodePoint(0x1d41a + c.charCodeAt(0) - 97)); const toBoldNumber = (num) => String(num).replace(/[0-9]/g, d => String.fromCodePoint(0x1d7ec + parseInt(d))); const formatted = categories.map((name, i) => âœ¨ | ${toBoldNumber(i + 1)}. ${toBold(name)}).join("\n"); const msg = ğŸ’« ğ‚ğ¡ğ¨ğ¨ğ¬ğ ğšğ§ ğšğ¥ğ›ğ®ğ¦ ğœğšğ­ğğ ğ¨ğ«ğ² ğŸ’«\n + âœºâ”â”â”â”â”â”â”â—ˆâ—‰â—ˆâ”â”â”â”â”â”â”âœº\n${formatted}\nâœºâ”â”â”â”â”â”â”â—ˆâ—‰â—ˆâ”â”â”â”â”â”â”âœº; api.sendMessage({ body: msg }, threadID, (err, info) => { if (!err) { global.client.handleReply.push({ name: this.config.name, type: "reply", messageID: info.messageID, author: senderID, categories }); } }, messageID); }; module.exports.handleReply = async function ({ api, event, handleReply }) { const { threadID, messageID, senderID, body } = event; api.unsendMessage(handleReply.messageID); const replyNum = parseInt(body); if (isNaN(replyNum)  replyNum < 1  replyNum > handleReply.categories.length) { return api.sendMessage("âŒ ğğ¥ğğšğ¬ğ ğ«ğğ©ğ¥ğ² ğ°ğ¢ğ­ğ¡ ğš ğ¯ğšğ¥ğ¢ğ ğ§ğ®ğ¦ğ›ğğ«.", threadID, messageID); } const selectedCategory = handleReply.categories[replyNum - 1]; if (["horny", "18plus", "sex"].includes(selectedCategory) && senderID !== adminID) { return api.sendMessage("ğŸš« ğ˜ğ¨ğ® ğšğ«ğ ğ§ğ¨ğ­ ğšğ¥ğ¥ğ¨ğ°ğğ ğ­ğ¨ ğ¯ğ¢ğğ° ğ­ğ¡ğ¢ğ¬ ğœğšğ­ğğ ğ¨ğ«ğ².", threadID, messageID); } const captions = { funny: "ğŸ¤£ > Funny video", islamic: "ğŸ•‹ > Islamic video", sad: "ğŸ¥º > Sad video", anime: "ğŸ“º > Anime video", cartoon: "ğŸ¨ > Cartoon video", love: "â¤ï¸ > Love video", horny: "ğŸ¥µ > Horny video", couple: "ğŸ’‘ > Couple video", flower: "ğŸŒ¸ > Flower video", marvel: "ğŸ¦¸ > Marvel video", aesthetic: "ğŸ€ > Aesthetic video", sigma: "ğŸ¤ > Sigma video", lyrics: "ğŸ¶ > Lyrics video", cat: "ğŸ± > Cat video", "18plus": "ğŸ” > 18+ video", freefire: "ğŸ”¥ > FreeFire video", football: "âš½ > Football video", girl: "ğŸ‘§ > Girl video", friend: "ğŸ‘« > Friends video", cricket: "ğŸ > Cricket video" }; try { const res = await axios.get(${BASE_API_URL}/album?type=${selectedCategory}); const mediaUrl = res.data.data; if (!mediaUrl) return api.sendMessage("âš ï¸ ğğ¨ ğœğ¨ğ§ğ­ğğ§ğ­ ğŸğ¨ğ®ğ§ğ.", threadID, messageID); const response = await axios.get(mediaUrl, { responseType: "arraybuffer" }); const ext = path.extname(mediaUrl) || ".mp4"; const filePath = path.join(__dirname, "cache", album_${Date.now()}${ext}); fs.writeFileSync(filePath, Buffer.from(response.data, "binary")); api.sendMessage({ body: captions[selectedCategory] || ğŸ¬ ${selectedCategory} video, attachment: fs.createReadStream(filePath) }, threadID, () => fs.unlinkSync(filePath), messageID); } catch (err) { console.error(err); api.sendMessage("âŒ ğ„ğ«ğ«ğ¨ğ« ğ¥ğ¨ğšğğ¢ğ§ğ  ğœğ¨ğ§ğ­ğğ§ğ­.", threadID, messageID); } };
