const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
    name: 'autosent',
    version: '10.0.1',
    hasPermssion: 0,
    credits: 'ðð«ð¢ð²ðšð§ð¬ð¡ ð‘ðšð£ð©ð®ð­ (Modified by ChatGPT)',
    description: 'Set Karne Ke Bad Automatically Msg Send Karega (Bangladesh Time)',
    commandCategory: 'group messenger',
    usages: '[]',
    cooldowns: 3
};

const messages = [
    { time: '12:00 AM', message: ` ðŸ’ ðŸðŸ:ðŸŽðŸŽ ð€ðŒ ðŸ’
à¦°à¦¾à¦¤ à§§à§¨à¦Ÿà¦¾ à¦¬à¦¾à¦œà§‡! à¦­à§‚à¦¤à§‡à¦°à¦¾à¦“ 
à¦à¦–à¦¨ à¦¬à¦¿à¦°à¦•à§à¦¤ à¦•à¦°à¦¤à§‡ à¦šà¦¾à§Ÿ à¦¨à¦¾!  
â„ð• ð•“ð•šâ„•` },
    { time: '1:00 AM', message: ` ðŸ’ ðŸ:ðŸŽðŸŽ ð€ðŒ ðŸ’
à¦ªà§à¦°à¦¿à§Ÿ à¦¦à§à¦°à¦¤à§à¦¬ à¦•à¦–à¦¨à§‹ à¦¸à¦®à§à¦ªà¦°à§à¦• 
à¦†à¦²à¦¾à¦¦à¦¾ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡ à¦¨à¦¾à¦¹ 
à¦¸à¦®à§Ÿ à¦•à¦–à¦¨à§‹ à¦¸à¦®à§à¦ªà¦°à§à¦•
à¦¤à§ˆà¦°à¦¿à¦•à¦°à§‡ à¦¨à¦¾à¦¹à§
â„ð• ð•“ð•šâ„•` },
    { time: '2:00 AM', message: ` ðŸ’ ðŸ:ðŸŽðŸŽ ð€ðŒ ðŸ’
à¦ à¦¸à¦®à§Ÿ à¦¶à§à¦§à§ à¦ªà§à¦°à§‡à¦®à¦¿à¦• à¦†à¦°
à¦ªà§à¦°à§‹à¦—à§à¦°à¦¾à¦®à¦¾à¦° à¦œà§‡à¦—à§‡ à¦¥à¦¾à¦•à§‡!  
â„ð• ð•“ð•šâ„•` },
    { time: '3:00 AM', message: ` ðŸ’ ðŸ‘:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦¨à¦¾à¦®à¦¾à¦œ à¦¶à§à¦°à§‡à¦·à§à¦  à¦‡à¦¬à¦¾à¦¦à¦¤ ðŸŒ·
â„ð• ð•“ð•šâ„•` },
    { time: '4:00 AM', message: ` ðŸ’ ðŸ’:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
ðŸðŸ™‚ Life is short. Donâ€™t waste it.
â„ð• ð•“ð•šâ„•` },
    { time: '5:00 AM', message: ` ðŸ’ ðŸ“:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦°à¦¾à¦¬à§à¦¬à¦¿à¦° à¦¹à¦¾à¦®à¦¹à§à¦®à¦¾ à¦•à¦¾à¦®à¦¾ à¦°à¦¾à¦¬à§à¦¬à¦¾à¦ˆà¦¯à¦¼à¦¾à¦¨à§€ à¦¸à¦¾à¦—à¦¿à¦°à¦¾
â„ð• ð•“ð•šâ„•` },
    { time: '6:00 AM', message: ` ðŸ’ ðŸ”:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦†à¦¸à¦¸à¦¾à¦²à¦¾à¦®à§à¦¯à¦¼à¦¾à¦²à¦¾à¦‡à¦•à§à¦® à¦“à¦°à¦¾à¦¹à¦®à¦¾à¦¤à§à¦²à§à¦²à¦¾à¦¹ 
â„ð• ð•“ð•šâ„•` },
    { time: '7:00 AM', message: ` ðŸ’ ðŸ•:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦¨à¦¤à§à¦¨ à¦¸à¦•à¦¾à¦², à¦¨à¦¤à§à¦¨ à¦†à¦¶à¦¾ â€” à¦¶à§à¦­ à¦¸à¦•à¦¾à¦²
â„ð• ð•“ð•šâ„•` },
    { time: '8:00 AM', message: ` ðŸ’ ðŸ–:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦¸à¦•à¦¾à¦² à¦¸à¦•à¦¾à¦² à¦¨à¦¿à¦œà§‡à¦° à¦²à¦•à§à¦·à§à¦¯ à¦ à¦¿à¦• à¦•à¦°à§‡ à¦¨à¦¿à¦¨
â„ð• ð•“ð•šâ„•` },
    { time: '9:00 AM', message: ` ðŸ’ ðŸ—:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦†à¦œà¦“ à¦­à¦¾à¦²à§‹ à¦•à¦¿à¦›à§ à¦¹à¦¬à§‡, à¦¬à¦¿à¦¶à§à¦¬à¦¾à¦¸ à¦°à¦¾à¦–à§à¦¨
â„ð• ð•“ð•šâ„•` },
    { time: '10:00 AM', message: ` ðŸ’ ðŸðŸŽ:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦¸à¦®à§Ÿà¦•à§‡ à¦®à§‚à¦²à§à¦¯ à¦¦à¦¿à¦¨.à¦¸à¦®à§Ÿ à¦†à¦ªà¦¨à¦¾à¦•à§‡ à¦®à§‚à¦²à§à¦¯ à¦¦à§‡à¦¬à§‡
â„ð• ð•“ð•šâ„•` },
    { time: '11:00 AM', message: ` ðŸ’ ðŸðŸ:ðŸŽðŸŽ ð€ðŒ ðŸ’ 
à¦¯à§‡ à¦¸à§à¦¬à¦ªà§à¦¨ à¦¦à§‡à¦–à§‡ à¦¸à§‡ à¦…à¦¨à§‡à¦• à¦•à¦¿à¦›à§ à¦ªà¦¾à¦°à§‡
â„ð• ð•“ð•šâ„•` },
    { time: '12:00 PM', message: ` ðŸ’ ðŸðŸ:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¦à§à¦ªà§à¦°à§‡à¦° à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾ â€” à¦­à¦¾à¦²à§‹ à¦¥à¦¾à¦•à§à¦¨
â„ð• ð•“ð•šâ„•` },
    { time: '1:00 PM', message: ` ðŸ’ ðŸ:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¬à¦¿à¦°à¦¤à¦¿ à¦¨à¦¿à¦¨, à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à§à¦¨
â„ð• ð•“ð•šâ„•` },
    { time: '2:00 PM', message: ` ðŸ’ ðŸ:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦†à¦ªà¦¨à¦¾à¦° à¦®à¦¨à§‹à¦¯à§‹à¦—à¦‡ à¦†à¦ªà¦¨à¦¾à¦° à¦¶à¦•à§à¦¤à¦¿
â„ð• ð•“ð•šâ„•` },
    { time: '3:00 PM', message: ` ðŸ’ ðŸ‘:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¦à§à¦ªà§à¦° à¦¶à§‡à¦·à§‡ à¦¬à¦¿à¦•à§‡à¦²à§‡à¦° à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾
â„ð• ð•“ð•šâ„•` },
    { time: '4:00 PM', message: ` ðŸ’ ðŸ’:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦à¦• à¦•à¦¾à¦ª à¦šà¦¾ à¦†à¦° à¦¶à¦¾à¦¨à§à¦¤ à¦¬à¦¿à¦•à§‡à¦² à¦šà¦¾à¦‡ 
â„ð• ð•“ð•šâ„•` },
    { time: '5:00 PM', message: ` ðŸ’ ðŸ“:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¬à¦¿à¦•à§‡à¦² à¦®à¦¾à¦¨à§‡à¦‡ à¦à¦•à¦Ÿà§ à¦¬à¦¿à¦¶à§à¦°à¦¾à¦® à¦“ à¦ªà§à¦°à¦¶à¦¾à¦¨à§à¦¤à¦¿
â„ð• ð•“ð•šâ„•` },
    { time: '6:00 PM', message: ` ðŸ’ ðŸ”:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¬à¦¿à¦•à§‡à¦²à§‡à¦° à¦¶à§‡à¦· à¦†à¦²à§‹à¦¤à§‡à¦“ à¦¸à§Œà¦¨à§à¦¦à¦°à§à¦¯ à¦¥à¦¾à¦•à§‡à¥¤    
â„ð• ð•“ð•šâ„•` },
    { time: '7:00 PM', message: ` ðŸ’ ðŸ•:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦¸à¦¬à¦¾à¦‡ à¦ªà¦°à¦¿à¦¬à¦¾à¦°à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦¸à¦®à§Ÿ à¦•à¦¾à¦Ÿà¦¾à¦¨à¥¤
â„ð• ð•“ð•šâ„•` },
    { time: '8:00 PM', message: ` ðŸ’ ðŸ–:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦†à¦œà¦•à§‡à¦° à¦¦à¦¿à¦¨ à¦•à§‡à¦®à¦¨ à¦—à§‡à¦²?
â„ð• ð•“ð•šâ„•` },
    { time: '9:00 PM', message: ` ðŸ’ ðŸ—:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦˜à§à¦®à¦¾à¦¨à§‹à¦° à¦†à¦—à§‡ à¦ªà§à¦°à¦¾à¦°à§à¦¥à¦¨à¦¾ à¦•à¦°à§à¦£
â„ð• ð•“ð•šâ„•` },
    { time: '10:00 PM', message: ` ðŸ’ ðŸðŸŽ:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦°à¦¾à¦¤à§‡à¦° à¦†à¦°à¦¾à¦®à¦¦à¦¾à§Ÿà¦• à¦¶à§à¦­à§‡à¦šà§à¦›à¦¾ 
â„ð• ð•“ð•šâ„•` },
    { time: '11:00 PM', message: ` ðŸ’ ðŸðŸ:ðŸŽðŸŽ ððŒ ðŸ’ 
à¦˜à§à¦®à¦¿à§Ÿà§‡ à¦ªà§œà¦¾à¦° à¦¸à¦®à§Ÿ à¦¹à§Ÿà§‡à¦›à§‡, à¦¶à§à¦­ à¦°à¦¾à¦¤à§à¦°à¦¿  
â„ð• ð•“ð•šâ„•` },
];

module.exports.onLoad = ({ api }) => {
    console.log(chalk.bold.hex("#00c300")("============ AUTOSENT COMMAND LOADED (BD TIME) ============"));
    messages.forEach(({ time, message }) => {
        const [hour, minute, period] = time.trim().split(/[: ]/);
        let hour24 = parseInt(hour, 10);
        if (period === 'PM' && hour !== '12') hour24 += 12;
        if (period === 'AM' && hour === '12') hour24 = 0;

        const rule = new schedule.RecurrenceRule();
        rule.tz = 'Asia/Dhaka';
        rule.hour = hour24;
        rule.minute = parseInt(minute, 10);

        schedule.scheduleJob(rule, () => {
            if (!global.data?.allThreadID) return;
            global.data.allThreadID.forEach(threadID => {
                api.sendMessage(message, threadID, (error) => {
                    if (error) {
                        console.error(`Failed to send message to ${threadID}:`, error);
                    }
                });
            });
        });
        console.log(chalk.hex("#00FFFF")(`Scheduled (BDT): ${time} => ${message.split('\n')[0]}...`));
    });
};

module.exports.run = () => {
    // Main logic is in onLoad
};
